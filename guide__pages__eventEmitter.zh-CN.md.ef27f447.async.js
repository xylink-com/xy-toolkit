(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{c5xa:function(e,t,n){"use strict";n.r(t);var l=n("q1tI"),a=n.n(l),r=n("dEAq"),m=n("ZpkN");t["default"]=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h1",{id:"eventemitter-\u4e8b\u4ef6\u7ba1\u7406\u5668"},a.a.createElement(r["AnchorLink"],{to:"#eventemitter-\u4e8b\u4ef6\u7ba1\u7406\u5668","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:["icon","icon-link"]})),"EventEmitter \u4e8b\u4ef6\u7ba1\u7406\u5668"),a.a.createElement("p",null,"EventEmitter \u662f\u4f7f\u7528 Map \u548c Set \u5b9e\u73b0\u7684\u7b80\u6613\u7248\u7684\u4e8b\u4ef6\u7ba1\u7406\u5668\uff0cAPI \u4e0e node.js EventEmitter \u98ce\u683c\u57fa\u672c\u4e00\u81f4\u3002"),a.a.createElement("p",null,a.a.createElement(r["Link"],{to:"https://nodejs.org/api/events.html#events_class_eventemitter"},"NodeJs EventEmitter docs")),a.a.createElement("h2",{id:"\u4f7f\u7528"},a.a.createElement(r["AnchorLink"],{to:"#\u4f7f\u7528","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:["icon","icon-link"]})),"\u4f7f\u7528"),a.a.createElement(m["a"],{code:'import {EventEmitter} from "toolkit";\n\nconst handler = (data) => {\n  console.log("==>app min", { data });\n};\nEventEmitter.on("app-min", handler);\nconst offListener = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      EventEmitter.off("app-min", handler);\n      resolve(true);\n    }, 3000);\n  });\n};\noffListener().then(() => {\n  EventEmitter.emit("app-min", { min: true });\n});\nEventEmitter.emit("app-min", { min: false });\nconsole.log("==> max listeners size: ", EventEmitter.getMaxListeners());\n',lang:"ts"}),a.a.createElement("h2",{id:"event-\u4e8b\u4ef6"},a.a.createElement(r["AnchorLink"],{to:"#event-\u4e8b\u4ef6","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:["icon","icon-link"]})),"Event \u4e8b\u4ef6"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u4e8b\u4ef6"),a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u63cf\u8ff0"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"newListener"),a.a.createElement("td",null,"evt: string, listener: handlerType, once: boolean = false"),a.a.createElement("td",null,"\u6ce8\u518c newListener \u76d1\u542c\u4e8b\u4ef6\u540e\uff0c\u5f53\u65b0\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\u6ce8\u518c\u540e\u5c06\u4f1a\u89e6\u53d1")),a.a.createElement("tr",null,a.a.createElement("td",null,"removeListener"),a.a.createElement("td",null,"evt: string, listener: handlerType"),a.a.createElement("td",null,"\u6ce8\u518c removeListener \u76d1\u542c\u4e8b\u4ef6\u540e\uff0c\u5f53\u79fb\u9664\u4e8b\u4ef6\u76d1\u542c\u5668\u540e\u5c06\u4f1a\u89e6\u53d1")))),a.a.createElement("p",null,"\u4f7f\u7528\u793a\u4f8b\uff1a"),a.a.createElement(m["a"],{code:'EventEmitter.on("newListener", (data) => {\n  console.log("==>newListener", JSON.stringify(data));\n});\nEventEmitter.on("removeListener", (data) => {\n  console.log("==>removeListener", data);\n});\nconst handler = () => console.log("==>app-exit", 2);\nEventEmitter.on("app-quit", () => console.log("==>app-quit", 1));\nEventEmitter.on("app-exit", handler);\nconsole.log("==>", EventEmitter.getListeners("app-exit"));\nEventEmitter.off("app-exit", handler);\nconsole.log("==>", EventEmitter.getListeners("app-exit"));\n',lang:"ts"}),a.a.createElement("h2",{id:"api"},a.a.createElement(r["AnchorLink"],{to:"#api","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:["icon","icon-link"]})),"API"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"API"),a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u8fd4\u56de\u503c"),a.a.createElement("th",null,"\u63cf\u8ff0"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"on|addListener"),a.a.createElement("td",null,"evt: string, listener: handlerType, once: boolean = false"),a.a.createElement("td",null,"true|false"),a.a.createElement("td",null,"\u6dfb\u52a0\u4e00\u4e2a\u76d1\u542c\u5668\uff08\u8ba2\u9605\u8005\uff09")),a.a.createElement("tr",null,a.a.createElement("td",null,"off|removeListener"),a.a.createElement("td",null,"evt: string, listener: handlerType"),a.a.createElement("td",null,"true|false"),a.a.createElement("td",null,"\u79fb\u9664\u4e00\u4e2a\u76d1\u542c\u5668\uff08\u8ba2\u9605\u8005\uff09")),a.a.createElement("tr",null,a.a.createElement("td",null,"once"),a.a.createElement("td",null,"evt: string, listener: handlerType"),a.a.createElement("td",null,"true|false"),a.a.createElement("td",null,"\u6dfb\u52a0\u4e00\u4e2a\u5355\u6b21\u54cd\u5e94\u76d1\u542c\u5668\uff08\u8ba2\u9605\u8005\uff09")),a.a.createElement("tr",null,a.a.createElement("td",null,"emit"),a.a.createElement("td",null,"evt: string, ...params"),a.a.createElement("td",null,"true|false"),a.a.createElement("td",null,"\u89e6\u53d1\u4e8b\u4ef6\u5e76\u4e14\u4f20\u9012\u53c2\u6570")),a.a.createElement("tr",null,a.a.createElement("td",null,"getMaxListeners"),a.a.createElement("td",null),a.a.createElement("td",null,"number"),a.a.createElement("td",null,"\u83b7\u53d6\u4e8b\u4ef6\u6700\u591a\u6302\u8f7d\u7684\u76d1\u542c\u5668\uff08\u8ba2\u9605\u8005\uff09\u6570\u91cf\uff0c\u9ed8\u8ba4\u662f 10 \u4e2a\u3002")),a.a.createElement("tr",null,a.a.createElement("td",null,"setMaxListeners"),a.a.createElement("td",null,"size: number"),a.a.createElement("td",null,"true|false"),a.a.createElement("td",null,"\u83b7\u53d6\u4e8b\u4ef6\u6700\u591a\u6302\u8f7d\u7684\u76d1\u542c\u5668\uff08\u8ba2\u9605\u8005\uff09\u6570\u91cf\uff0c\u9ed8\u8ba4\u662f 10 \u4e2a\u3002")),a.a.createElement("tr",null,a.a.createElement("td",null,"removeAllListeners"),a.a.createElement("td",null,"evt?: string"),a.a.createElement("td",null),a.a.createElement("td",null,"\u4f20\u9012 evt \u5219\u79fb\u9664\u8be5\u4e8b\u4ef6\u6240\u6709\u7684\u76d1\u542c\u5668\uff0c\u4e0d\u4f20\u9012\u6216\u4f20\u5165 null \u5c06\u4f1a\u79fb\u9664\u6240\u6709\u76d1\u542c\u5668")),a.a.createElement("tr",null,a.a.createElement("td",null,"getListeners"),a.a.createElement("td",null,"evt: string"),a.a.createElement("td",null,"set|false"),a.a.createElement("td",null,"\u83b7\u53d6\u4e8b\u4ef6\u7684\u6240\u6709\u76d1\u542c\u5668")),a.a.createElement("tr",null,a.a.createElement("td",null,"allListeners"),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null,"\u83b7\u53d6\u5df2\u7ecf\u6ce8\u518c\u7684\u6240\u6709\u76d1\u542c\u5668")),a.a.createElement("tr",null,a.a.createElement("td",null,"listenerCount"),a.a.createElement("td",null,"evt: string"),a.a.createElement("td",null,"number"),a.a.createElement("td",null,"\u83b7\u53d6\u4e8b\u4ef6\u4e0a\u6ce8\u518c\u7684\u76d1\u542c\u5668\u7684\u6570\u91cf")),a.a.createElement("tr",null,a.a.createElement("td",null,"size"),a.a.createElement("td",null),a.a.createElement("td",null,"number"),a.a.createElement("td",null,"\u83b7\u53d6\u5df2\u7ecf\u6ce8\u518c\u7684\u4e8b\u4ef6\u7684\u6570\u91cf")),a.a.createElement("tr",null,a.a.createElement("td",null,"clear"),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null,"\u6e05\u7a7a\u6240\u6709\u76d1\u542c\u5668")))),a.a.createElement("h2",{id:"todo"},a.a.createElement(r["AnchorLink"],{to:"#todo","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:["icon","icon-link"]})),"TODO"),a.a.createElement("ul",{className:["contains-task-list"]},a.a.createElement("li",{className:["task-list-item"]},a.a.createElement("input",{type:"checkbox",disabled:!0})," \u6dfb\u52a0 event \u5c01\u88c5\uff0c\u5e76\u8fd4\u56de\u81ea\u5b9a\u4e49 event"),a.a.createElement("li",{className:["task-list-item"]},a.a.createElement("input",{type:"checkbox",disabled:!0})," \u6dfb\u52a0 error \u4e8b\u4ef6\u7ba1\u7406"),a.a.createElement("li",{className:["task-list-item"]},a.a.createElement("input",{type:"checkbox",disabled:!0})," \u4f7f\u7528\u94fe\u8868\u7ba1\u7406\u76d1\u542c\u5668"),a.a.createElement("li",{className:["task-list-item"]},a.a.createElement("input",{type:"checkbox",disabled:!0})," \u5b8c\u5584 API"))))}}}]);